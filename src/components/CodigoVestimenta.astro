---
// CodigoVestimenta.astro - Con Hojas Laterales
---

<section class="py-10 px-4 relative overflow-hidden">
  <!-- Fondo sutil -->
  <div
    class="absolute inset-0 bg-gradient-to-b from-[#fffaf5]/40 via-[#fff9f0]/20 to-[#fffaf5]/40 z-0"
  >
  </div>

  <div class="max-w-xl mx-auto text-center relative z-10">
    <!-- üçÉ HOJAS LATERALES IZQUIERDA -->
    <div
      class="absolute left-0 top-1/2 -translate-y-1/2 w-12 sm:w-20 md:w-24 lg:w-28 pointer-events-none z-0 -ml-8 sm:-ml-12 md:-ml-16 lg:-ml-20"
      id="hoja-izq-vestimenta"
    >
      <img
        src="/imagenes/Hojas.webp"
        alt="Hojas decorativas izquierda"
        class="w-full h-auto object-contain opacity-80 transform -scale-x-100"
      />
    </div>

    <!-- üçÉ HOJAS LATERALES DERECHA -->
    <div
      class="absolute right-0 top-1/2 -translate-y-1/2 w-12 sm:w-20 md:w-24 lg:w-28 pointer-events-none z-0 -mr-8 sm:-mr-12 md:-mr-16 lg:-mr-20"
      id="hoja-der-vestimenta"
    >
      <img
        src="/imagenes/Hojas.webp"
        alt="Hojas decorativas derecha"
        class="w-full h-auto object-contain opacity-80"
      />
    </div>

    <!-- üå∏ SEPARADOR SUPERIOR -->
    <div class="flex justify-center mb-6" id="separador-superior">
      <img
        src="/imagenes/Separadores.webp"
        alt="Separador decorativo"
        class="w-32 md:w-40 lg:w-48 h-auto object-contain opacity-90"
      />
    </div>

    <!-- T√çTULO C√ìDIGO DE VESTIMENTA -->
    <div class="mb-6" id="titulo-vestimenta">
      <h2
        class="font-charm text-2xl md:text-3xl lg:text-3xl text-[#8C5A63] font-bold tracking-wide mb-4"
      >
        C√ìDIGO DE VESTIMENTA
      </h2>
      <!-- L√≠nea decorativa -->
      <div class="flex items-center justify-center gap-3">
        <div
          class="w-16 h-[2px] bg-gradient-to-r from-transparent to-[#C9956C]"
        >
        </div>
        <div class="w-2 h-2 rounded-full bg-[#C9956C]"></div>
        <div
          class="w-16 h-[2px] bg-gradient-to-l from-transparent to-[#C9956C]"
        >
        </div>
      </div>
    </div>

    <!-- üëî IMAGEN VESTIMENTA -->
    <div class="flex justify-center mb-6" id="imagen-vestimenta">
      <img
        src="/imagenes/CodigoVestimenta.webp"
        alt="C√≥digo de vestimenta"
        class="w-16 md:w-28 lg:w-28 h-auto object-contain drop-shadow-lg"
      />
    </div>

    <!-- DESCRIPCI√ìN -->
    <div class="mb-4" id="descripcion-vestimenta">
      <p
        class="font-charm text-3xl md:text-4xl text-[#8C5A63] font-bold leading-relaxed"
      >
        Formal
      </p>
    </div>

    <!-- NOTA IMPORTANTE -->
    <div class="mb-4" id="nota-vestimenta">
      <p class="font-charm text-xl md:text-xl text-[#5A4A42] leading-relaxed">
        Evitar los colores blanco y beige
      </p>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  if (typeof window !== "undefined") {
    document.addEventListener("DOMContentLoaded", () => {
      console.log("üëî Iniciando animaci√≥n de C√≥digo de Vestimenta...");

      // üéØ ESTADO INICIAL
      gsap.set("#separador-superior", { opacity: 0, y: -30, scale: 0.8 });
      gsap.set("#titulo-vestimenta", { opacity: 0, y: -20 });
      gsap.set("#imagen-vestimenta", { opacity: 0, scale: 0.7, rotation: -10 });
      gsap.set("#descripcion-vestimenta", { opacity: 0, x: -50 });
      gsap.set("#nota-vestimenta", { opacity: 0, x: 50 });
      gsap.set("#nota-novia", { opacity: 0, y: 20, scale: 0.95 });
      gsap.set("#hoja-izq-vestimenta", { opacity: 0, x: -60 });
      gsap.set("#hoja-der-vestimenta", { opacity: 0, x: 60 });

      ScrollTrigger.create({
        trigger: "#separador-superior",
        start: "top 85%",
        end: "top 20%",
        onEnter: () => {
          const tl = gsap.timeline();

          tl.to("#separador-superior", {
            opacity: 1,
            y: 0,
            scale: 1,
            duration: 1.2,
            ease: "back.out(1.5)",
          })
            .to(
              "#titulo-vestimenta",
              {
                opacity: 1,
                y: 0,
                duration: 1,
                ease: "power2.out",
              },
              "<",
            )
            .to(
              "#imagen-vestimenta",
              {
                opacity: 1,
                scale: 1,
                rotation: 0,
                duration: 1.3,
                ease: "elastic.out(1, 0.5)",
              },
              "<",
            )
            .to(
              "#descripcion-vestimenta",
              {
                opacity: 1,
                x: 0,
                duration: 1,
                ease: "power2.out",
              },
              "<",
            )
            .to(
              "#nota-vestimenta",
              {
                opacity: 1,
                x: 0,
                duration: 1,
                ease: "power2.out",
              },
              "<",
            )
            .to(
              "#nota-novia",
              {
                opacity: 1,
                y: 0,
                scale: 1,
                duration: 1,
                ease: "back.out(1.3)",
              },
              "-=0.5",
            )
            .to(
              "#hoja-izq-vestimenta, #hoja-der-vestimenta",
              {
                opacity: 1,
                x: 0,
                duration: 1.3,
                ease: "power3.out",
              },
              "-=0.8",
            );

          // Pulso sutil en imagen
          gsap.to("#imagen-vestimenta", {
            scale: 1.05,
            duration: 2.5,
            ease: "sine.inOut",
            yoyo: true,
            repeat: -1,
            delay: 1.5,
          });
        },
        onLeaveBack: () => {
          const tl = gsap.timeline();

          tl.to(
            "#separador-superior, #titulo-vestimenta, #imagen-vestimenta, #descripcion-vestimenta, #nota-vestimenta, #nota-novia, #hoja-izq-vestimenta, #hoja-der-vestimenta",
            {
              opacity: 0,
              duration: 0.6,
              ease: "power2.in",
            },
          )
            .to(
              "#separador-superior",
              { y: -30, scale: 0.8, duration: 0.6 },
              "<",
            )
            .to("#titulo-vestimenta", { y: -20, duration: 0.6 }, "<")
            .to(
              "#imagen-vestimenta",
              { scale: 0.7, rotation: -10, duration: 0.6 },
              "<",
            )
            .to("#descripcion-vestimenta", { x: -50, duration: 0.6 }, "<")
            .to("#nota-vestimenta", { x: 50, duration: 0.6 }, "<")
            .to("#nota-novia", { y: 20, scale: 0.95, duration: 0.6 }, "<")
            .to("#hoja-izq-vestimenta", { x: -60, duration: 0.6 }, "<")
            .to("#hoja-der-vestimenta", { x: 60, duration: 0.6 }, "<");
        },
      });

      console.log("üëî‚ú® ¬°C√≥digo de Vestimenta activado!");
    });
  }
</script>

<style>
  /* Transici√≥n suave para textos */
  #descripcion-vestimenta p,
  #nota-vestimenta p {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  #descripcion-vestimenta:hover p {
    color: #8c5a63;
    transform: scale(1.05);
    text-shadow: 0 2px 8px rgba(140, 90, 99, 0.3);
  }

  /* Efecto hover en la imagen */
  #imagen-vestimenta img {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  #imagen-vestimenta:hover img {
    transform: scale(1.1);
    filter: drop-shadow(0 8px 20px rgba(140, 90, 99, 0.4));
  }

  /* Separadores con transici√≥n suave */
  #separador-superior img,
  #separador-inferior img {
    transition: all 0.3s ease;
  }

  #separador-superior:hover img,
  #separador-inferior:hover img {
    transform: scale(1.1);
    filter: brightness(1.1);
  }

  /* Hojas laterales */
  #hoja-izq-vestimenta img,
  #hoja-der-vestimenta img {
    transition: all 0.3s ease;
  }

  /* CARD NOTA NOVIA */
  .nota-novia-card {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 12px 20px;
    background: linear-gradient(
      135deg,
      rgba(140, 90, 99, 0.08),
      rgba(201, 149, 108, 0.08)
    );
    border: 1px solid rgba(140, 90, 99, 0.25);
    border-radius: 16px;
    position: relative;
    overflow: hidden;
  }

  /* L√≠nea dorada superior */
  .nota-novia-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 10%;
    width: 80%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(201, 149, 108, 0.6),
      transparent
    );
  }

  /* L√≠nea dorada inferior */
  .nota-novia-card::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 10%;
    width: 80%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(201, 149, 108, 0.6),
      transparent
    );
  }

  .nota-novia-icono {
    color: #c9956c;
    display: flex;
    align-items: center;
    flex-shrink: 0;
    filter: drop-shadow(0 1px 2px rgba(201, 149, 108, 0.3));
  }

  .nota-novia-texto {
    color: #8c5a63;
    font-style: italic;
    letter-spacing: 0.02em;
    line-height: 1.4;
  }
</style>
